<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>GRP Career Pvt Ltd.</title>
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <meta content="consultancy" name="keywords">
        <meta content="consultancy" name="description">

        <!-- Favicon -->
        <link href="img/favicon.ico" rel="icon">

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css2?family=Lato&family=Oswald:wght@200;300;400&display=swap" rel="stylesheet">
        
        <!-- CSS Libraries -->
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
        <link href="lib/animate/animate.min.css" rel="stylesheet">
        <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

        <!-- Template Stylesheet -->
        <link href="/css/style.css" rel="stylesheet">
    </head>

    <body>
        <!-- Top Bar Start -->
        <div class="top-bar d-none d-md-block">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-8">
                        <div class="top-bar-left">
                            <div class="text">
                                <i class="far fa-clock"></i>
                                <h2>10:00 - 7:00</h2>
                                <p>Mon - Sat</p>
                            </div>
                            <div class="text">
                                <i class="fa fa-phone-alt"></i>
                                <h2>+91 9643058418, </h2>
                                <h2>01204097776</h2>
                                <p>For Appointment</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="top-bar-right">
                            <div class="social">
                                <a href=""><i class="fab fa-twitter"></i></a>
                                <a href="https://www.facebook.com/share/16egu8TAQ3/"><i class="fab fa-facebook-f"></i></a>
                                <a href="https://www.linkedin.com/in/grp-career-548736359/"><i class="fab fa-linkedin-in"></i></a>
                                <a href="https://www.instagram.com/grp_career_pvt_ltd?igsh=MWc0cjRuN2NrZHZncA=="><i class="fab fa-instagram"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Top Bar End -->

        <!-- Nav Bar Start -->
        <div class="navbar navbar-expand-lg bg-dark navbar-dark">
            <div class="container-fluid">
                <a href="index.html" class="navbar-brand">
                    <img src="img/logo.png" alt="GRP Career Pvt Ltd.">
                </a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                    <div class="navbar-nav ml-auto">
                        <a href="/index.html" class="nav-item nav-link active">Home</a>
                        <a href="/about.html" class="nav-item nav-link">About</a>
                        <a href="/service.html" class="nav-item nav-link">Service</a>
                        <a href="/feature.html" class="nav-item nav-link">Feature</a>
                        <a href="/advisor.html" class="nav-item nav-link">Advisor</a>
                        <a href="/review.html" class="nav-item nav-link">Review</a>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                            <div class="dropdown-menu">
                                <a href="blog.html" class="dropdown-item">Blog Page</a>
                                <a href="company_reg.html" class="dropdown-item">Single Page</a>
                            </div>
                        </div>
                        <a href="/company_reg.html" class="nav-item nav-link">Contact</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- Nav Bar End -->
        <!-- Nav Bar End -->
        
        
        <!-- Contact Start -->
        <div class="contact mt-125">
            <div class="container">
                <div class="section-header">
                    <p>Get In Touch</p>
                    <h2>Get In Touch For Any Query</h2>
                </div>
                <div class="row align-items-center">
                    <div class="col-md-5">
                        <div class="contact-info">
                            <div class="contact-icon">
                                <i class="fa fa-map-marker-alt"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Our Head Office</h3>
                                <p><a href="https://maps.app.goo.gl/iVcYTCgxSNzcV5WW9" target="_blank">Corp. Off: 2nd Floor ,A-55, Sec-02,Noida G.B Nagar(U.P) - 201301</a></p>
                            </div>
                        </div>
                        <div class="contact-info">
                            <div class="contact-icon">
                                <i class="fa fa-phone-alt"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Call for Help</h3>
                                <p>+91 9643058418</p>
                                <p>01204097776</p>
                            </div>
                        </div>
                        <div class="contact-info">
                            <div class="contact-icon">
                                <i class="fa fa-envelope"></i>
                            </div>
                            <div class="contact-text">
                                <h3>Email for Information</h3>
                                <p><a href="mailto:info@grpcareer.com"><i class="fa fa-envelope"></i> info@grpcareer.com</a></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7">
                      <h2>Contact Us</h2>
                      <!-- Popup for success message -->
                      <div id="form-success-popup" class="form-success-popup">
                        <div class="popup-content">
                          <svg class="green-tick" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#28a745" stroke-width="3">
                            <path d="M20 6L9 17l-5-5"></path>
                          </svg>
                          <p>Your data is stored</p>
                        </div>
                      </div>
                    
                      <form id="contactForm" action="/submit-contact" method="POST" enctype="multipart/form-data">
                        <!-- User Type Selection -->
                        <div class="control-group">
                          <label for="user-type">I am a:</label>
                          <select class="form-control" id="user-type" name="user_type" required aria-describedby="user-type-error" aria-required="true">
                            <option value="">Select User Type</option>
                            <option value="student">Student/Fresher</option>
                            <option value="professional">Working Professional</option>
                            <option value="company">Company</option>
                          </select>
                          <p id="user-type-error" class="help-block text-danger"></p>
                        </div>
                    
                        <!-- Common Fields -->
                        <div class="control-group">
                          <input type="text" class="form-control" name="name" id="name" placeholder="Your Name" required
                                 data-validation-required-message="Please enter your name" aria-describedby="name-error" aria-required="true" />
                          <p id="name-error" class="help-block text-danger"></p>
                        </div>
                        <div class="control-group">
                          <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" required
                                 data-validation-required-message="Please enter your email" aria-describedby="email-error" aria-required="true" />
                          <p id="email-error" class="help-block text-danger"></p>
                        </div>
                    
                        <!-- Student/Fresher Form -->
                        <div class="user-specific" id="student-form" style="display: none;">
                          <div class="control-group">
                            <input type="text" class="form-control" name="student_requirements" id="requirements_student"
                                   placeholder="Job Requirements (e.g., role, industry)" aria-describedby="requirements-student-error" />
                            <p id="requirements-student-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="number" class="form-control" name="expected_ctc" id="expected_ctc"
                                   placeholder="Expected CTC (in LPA)" aria-describedby="expected-ctc-error" />
                            <p id="expected-ctc-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="url" class="form-control" name="linkedin_student" id="linkedin_student"
                                   placeholder="LinkedIn Profile URL" required data-required="true" aria-describedby="linkedin-student-error" aria-required="true" />
                            <p id="linkedin-student-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="tel" class="form-control" name="phone_student" id="phone_student"
                                   placeholder="Phone Number" required data-required="true" aria-describedby="phone-student-error" aria-required="true" />
                            <p id="phone-student-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="file" class="form-control" name="resume_student" id="resume_student"
                                   accept=".pdf,.doc,.docx" required data-required="true" aria-describedby="resume-student-error" aria-required="true" />
                            <p id="resume-student-error" class="help-block text-danger"></p>
                          </div>
                        </div>
                    
                        <!-- Working Professional Form -->
                        <div class="user-specific" id="professional-form" style="display: none;">
                          <div class="control-group">
                            <input type="number" class="form-control" name="current_salary" id="current_salary"
                                   placeholder="Current Salary (in LPA)" required data-required="true" aria-describedby="current-salary-error" aria-required="true" />
                            <p id="current-salary-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="notice_period" id="notice_period"
                                   placeholder="Notice Period (e.g., 30 days)" required data-required="true" aria-describedby="notice-period-error" aria-required="true" />
                            <p id="notice-period-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="professional_requirements" id="requirements_professional"
                                   placeholder="Job Requirements (e.g., role, industry)" aria-describedby="requirements-professional-error" />
                            <p id="requirements-professional-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="url" class="form-control" name="linkedin_professional" id="linkedin_professional"
                                   placeholder="LinkedIn Profile URL" required data-required="true" aria-describedby="linkedin-professional-error" aria-required="true" />
                            <p id="linkedin-professional-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="tel" class="form-control" name="phone_professional" id="phone_professional"
                                   placeholder="Phone Number" required data-required="true" aria-describedby="phone-professional-error" aria-required="true" />
                            <p id="phone-professional-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="file" class="form-control" name="resume_professional" id="resume_professional"
                                   accept=".pdf,.doc,.docx" required data-required="true" aria-describedby="resume-professional-error" aria-required="true" />
                            <p id="resume-professional-error" class="help-block text-danger"></p>
                          </div>
                        </div>
                    
                        <!-- Company Form -->
                        <div class="user-specific" id="company-form" style="display: none;">
                          <div class="control-group">
                            <input type="text" class="form-control" name="company_name" id="company_name"
                                   placeholder="Company Name" required data-required="true" aria-describedby="company-name-error" aria-required="true" />
                            <p id="company-name-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="contact_person" id="contact_person"
                                   placeholder="Contact Person" required data-required="true" aria-describedby="contact-person-error" aria-required="true" />
                            <p id="contact-person-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="tel" class="form-control" name="phone" id="phone_company"
                                   placeholder="Phone Number" required data-required="true" aria-describedby="phone-company-error" aria-required="true" />
                            <p id="phone-company-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="job_roles" id="job_roles"
                                   placeholder="Job Role(s)" required data-required="true" aria-describedby="job-roles-error" aria-required="true" />
                            <p id="job-roles-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="number" class="form-control" name="vacancies" id="vacancies"
                                   placeholder="Number of Vacancies" required data-required="true" aria-describedby="vacancies-error" aria-required="true" />
                            <p id="vacancies-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <textarea class="form-control" name="job_description" id="job_description"
                                      placeholder="Job Description" required data-required="true" aria-describedby="job-description-error" aria-required="true"></textarea>
                            <p id="job-description-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="qualifications" id="qualifications"
                                   placeholder="Required Qualifications" required data-required="true" aria-describedby="qualifications-error" aria-required="true" />
                            <p id="qualifications-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="experience" id="experience"
                                   placeholder="Experience Needed (e.g., 2-5 years)" required data-required="true" aria-describedby="experience-error" aria-required="true" />
                            <p id="experience-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="text" class="form-control" name="location" id="location"
                                   placeholder="Location" required data-required="true" aria-describedby="location-error" aria-required="true" />
                            <p id="location-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <textarea class="form-control" name="additional_notes" id="additional_notes"
                                      placeholder="Additional Notes (if any)" aria-describedby="additional-notes-error"></textarea>
                            <p id="additional-notes-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="url" class="form-control" name="website" id="website"
                                   placeholder="Company Website" required data-required="true" aria-describedby="website-error" aria-required="true" />
                            <p id="website-error" class="help-block text-danger"></p>
                          </div>
                          <div class="control-group">
                            <input type="file" class="form-control" name="job_doc" id="job_doc"
                                   accept=".pdf,.doc,.docx" required data-required="true" aria-describedby="job-doc-error" aria-required="true" />
                            <p id="job-doc-error" class="help-block text-danger"></p>
                          </div>
                        </div>
                    
                        <div>
                          <button class="btn" type="submit" id="sendMessageButton" aria-label="Submit form">Send Message</button>
                        </div>
                      </form>
                    
                      <style>
                        /* Form Error Messages */
                        .help-block.text-danger {
                          color: #dc3545;
                          font-size: 0.875rem;
                          margin-top: 0.25rem;
                        }
                    
                        /* Send Message Button */
                        #sendMessageButton {
                          background-color: #007bff;
                          color: #fff;
                          padding: 12px 24px;
                          border: none;
                          border-radius: 8px;
                          font-size: 16px;
                          font-weight: 600;
                          cursor: pointer;
                          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                          transition: background-color 0.3s, transform 0.2s;
                        }
                    
                        #sendMessageButton:hover {
                          background-color: #0056b3;
                          transform: translateY(-2px);
                        }
                    
                        #sendMessageButton:active {
                          transform: translateY(1px);
                        }
                    
                        #sendMessageButton:disabled {
                          background-color: #ccc;
                          cursor: not-allowed;
                        }
                    
                        /* Form Success Popup */
                        .form-success-popup {
                          position: fixed;
                          top: 50%;
                          left: 50%;
                          transform: translate(-50%, -50%) scale(0);
                          background: #fff;
                          border-radius: 12px;
                          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
                          z-index: 2000;
                          opacity: 0;
                          transition: all 0.3s ease;
                        }
                    
                        .form-success-popup.active {
                          transform: translate(-50%, -50%) scale(1);
                          opacity: 1;
                        }
                    
                        .popup-content {
                          display: flex;
                          align-items: center;
                          padding: 20px;
                          gap: 10px;
                        }
                    
                        .popup-content p {
                          margin: 0;
                          font-size: 16px;
                          font-weight: 500;
                          color: #333;
                        }
                    
                        .green-tick {
                          stroke-dasharray: 50;
                          stroke-dashoffset: 50;
                          animation: draw-tick 0.5s ease forwards;
                        }
                    
                        @keyframes draw-tick {
                          to {
                            stroke-dashoffset: 0;
                          }
                        }
                    
                        /* Responsive Adjustments */
                        @media (max-width: 576px) {
                          .form-success-popup {
                            width: 90%;
                          }
                        }
                      </style>
                    
                      <script>
                        document.addEventListener('DOMContentLoaded', function() {
                          const userTypeSelect = document.getElementById('user-type');
                          const contactForm = document.getElementById('contactForm');
                          const successPopup = document.getElementById('form-success-popup');
                    
                          // Form type switching
                          userTypeSelect.addEventListener('change', function() {
                            const userType = this.value;
                            // Hide all form sections and clear errors
                            document.querySelectorAll('.user-specific').forEach(form => {
                              form.style.display = 'none';
                              form.querySelectorAll('[required]').forEach(input => {
                                input.required = false;
                              });
                            });
                            document.querySelectorAll('.help-block.text-danger').forEach(block => {
                              block.textContent = '';
                            });
                    
                            // Show selected form and enable required fields
                            if (userType) {
                              const selectedForm = document.getElementById(`${userType}-form`);
                              selectedForm.style.display = 'block';
                              selectedForm.querySelectorAll('[data-required="true"]').forEach(input => {
                                input.required = true;
                              });
                            }
                          });
                    
                          // Store original required state
                          document.querySelectorAll('input[required], textarea[required], select[required]').forEach(input => {
                            input.setAttribute('data-required', 'true');
                          });
                    
                          // Validation functions
                          function validateLinkedInUrl(url) {
                            return /^https?:\/\/(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-]+\/?$/.test(url);
                          }
                    
                          function validateFileSize(fileInput) {
                            const maxSize = 5 * 1024 * 1024; // 5MB
                            if (fileInput.files.length && fileInput.files[0].size > maxSize) {
                              fileInput.nextElementSibling.textContent = 'File size must be less than 5MB';
                              return false;
                            }
                            return true;
                          }
                    
                          function validatePhone(phone) {
                            return /^[\d\s\-()+]{10,}$/.test(phone);
                          }
                    
                          function validateUrl(url) {
                            return /^https?:\/\/[^\s/$.?#].[^\s]*$/.test(url);
                          }
                    
                          // Form validation
                          function validateForm() {
                            let isValid = true;
                            const userType = userTypeSelect.value;
                    
                            // Clear previous errors
                            document.querySelectorAll('.help-block.text-danger').forEach(block => {
                              block.textContent = '';
                            });
                    
                            // Common validations
                            const name = document.getElementById('name');
                            if (!name.value.trim()) {
                              name.nextElementSibling.textContent = 'Please enter your name';
                              isValid = false;
                            }
                    
                            const email = document.getElementById('email');
                            if (!email.value.trim()) {
                              email.nextElementSibling.textContent = 'Please enter your email';
                              isValid = false;
                            } else if (!/^\S+@\S+\.\S+$/.test(email.value)) {
                              email.nextElementSibling.textContent = 'Please enter a valid email address';
                              isValid = false;
                            }
                    
                            // User-type-specific validations
                            if (userType === 'student') {
                              const linkedin = document.getElementById('linkedin_student');
                              if (!linkedin.value.trim()) {
                                linkedin.nextElementSibling.textContent = 'Please enter your LinkedIn URL';
                                isValid = false;
                              } else if (!validateLinkedInUrl(linkedin.value)) {
                                linkedin.nextElementSibling.textContent = 'Please enter a valid LinkedIn URL';
                                isValid = false;
                              }
                    
                              const phone = document.getElementById('phone_student');
                              if (!phone.value.trim()) {
                                phone.nextElementSibling.textContent = 'Please enter your phone number';
                                isValid = false;
                              } else if (!validatePhone(phone.value)) {
                                phone.nextElementSibling.textContent = 'Please enter a valid phone number';
                                isValid = false;
                              }
                    
                              const resume = document.getElementById('resume_student');
                              if (!resume.files.length) {
                                resume.nextElementSibling.textContent = 'Please upload your resume';
                                isValid = false;
                              } else if (!validateFileSize(resume)) {
                                isValid = false;
                              }
                    
                              const expectedCtc = document.getElementById('expected_ctc');
                              if (expectedCtc.value && expectedCtc.value < 0) {
                                expectedCtc.nextElementSibling.textContent = 'Expected CTC cannot be negative';
                                isValid = false;
                              }
                            } else if (userType === 'professional') {
                              const fields = {
                                'current_salary': 'Please enter your current salary',
                                'notice_period': 'Please enter your notice period',
                                'linkedin_professional': 'Please enter your LinkedIn URL',
                                'phone_professional': 'Please enter your phone number',
                                'resume_professional': 'Please upload your resume'
                              };
                    
                              for (const [field, message] of Object.entries(fields)) {
                                const element = document.getElementById(field);
                                if ((element.type === 'file' && !element.files.length) || (element.type !== 'file' && !element.value.trim())) {
                                  element.nextElementSibling.textContent = message;
                                  isValid = false;
                                }
                              }
                    
                              const linkedin = document.getElementById('linkedin_professional');
                              if (linkedin.value && !validateLinkedInUrl(linkedin.value)) {
                                linkedin.nextElementSibling.textContent = 'Please enter a valid LinkedIn URL';
                                isValid = false;
                              }
                    
                              const phone = document.getElementById('phone_professional');
                              if (phone.value && !validatePhone(phone.value)) {
                                phone.nextElementSibling.textContent = 'Please enter a valid phone number';
                                isValid = false;
                              }
                    
                              const resume = document.getElementById('resume_professional');
                              if (resume.files.length && !validateFileSize(resume)) {
                                isValid = false;
                              }
                    
                              const currentSalary = document.getElementById('current_salary');
                              if (currentSalary.value && currentSalary.value < 0) {
                                currentSalary.nextElementSibling.textContent = 'Current salary cannot be negative';
                                isValid = false;
                              }
                            } else if (userType === 'company') {
                              const fields = {
                                'company_name': 'Please enter the company name',
                                'contact_person': 'Please enter the contact person',
                                'phone_company': 'Please enter the phone number',
                                'job_roles': 'Please enter the job role(s)',
                                'vacancies': 'Please enter the number of vacancies',
                                'job_description': 'Please enter the job description',
                                'qualifications': 'Please enter the required qualifications',
                                'experience': 'Please enter the experience needed',
                                'location': 'Please enter the location',
                                'website': 'Please enter the company website',
                                'job_doc': 'Please upload the job document'
                              };
                    
                              for (const [field, message] of Object.entries(fields)) {
                                const element = document.getElementById(field);
                                if ((element.type === 'file' && !element.files.length) || (element.type !== 'file' && !element.value.trim())) {
                                  element.nextElementSibling.textContent = message;
                                  isValid = false;
                                }
                              }
                    
                              const phone = document.getElementById('phone_company');
                              if (phone.value && !validatePhone(phone.value)) {
                                phone.nextElementSibling.textContent = 'Please enter a valid phone number';
                                isValid = false;
                              }
                    
                              const website = document.getElementById('website');
                              if (website.value && !validateUrl(website.value)) {
                                website.nextElementSibling.textContent = 'Please enter a valid URL';
                                isValid = false;
                              }
                    
                              const jobDoc = document.getElementById('job_doc');
                              if (jobDoc.files.length && !validateFileSize(jobDoc)) {
                                isValid = false;
                              }
                    
                              const vacancies = document.getElementById('vacancies');
                              if (vacancies.value && vacancies.value <= 0) {
                                vacancies.nextElementSibling.textContent = 'Number of vacancies must be greater than 0';
                                isValid = false;
                              }
                            } else {
                              userTypeSelect.nextElementSibling.textContent = 'Please select a user type';
                              isValid = false;
                            }
                    
                            return isValid;
                          }
                    
                          // Form submission
                          contactForm.addEventListener('submit', function(e) {
                            e.preventDefault();
                    
                            if (!validateForm()) {
                              return;
                            }
                    
                            const submitButton = document.getElementById('sendMessageButton');
                            submitButton.disabled = true;
                            submitButton.textContent = 'Submitting...';
                    
                            const formData = new FormData(contactForm);
                            fetch('/submit-contact', {
                              method: 'POST',
                              body: formData
                            })
                              .then(response => {
                                if (!response.ok) {
                                  throw new Error('Network response was not ok');
                                }
                                return response.json();
                              })
                              .then(data => {
                                if (data.success) {
                                  successPopup.classList.add('active');
                                  setTimeout(() => {
                                    successPopup.classList.remove('active');
                                  }, 3000);
                                  contactForm.reset();
                                  document.querySelectorAll('.user-specific').forEach(form => {
                                    form.style.display = 'none';
                                  });
                                  document.querySelectorAll('.help-block.text-danger').forEach(block => {
                                    block.textContent = '';
                                  });
                                } else {
                                  alert('Submission failed: ' + (data.error || 'Unknown error'));
                                }
                              })
                              .catch(error => {
                                console.error('Error:', error);
                                alert('An error occurred. Please try again later.');
                              })
                              .finally(() => {
                                submitButton.disabled = false;
                                submitButton.textContent = 'Send Message';
                              });
                          });
                        });
                      </script>
                    
                        
                    </div>
        <!-- Contact End -->

         <div class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-lg-7">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="footer-contact">
                                    <h2>Our Head Office</h2>
                                    <p>Corp. Off: 2nd Floor ,A-55, Sec-02,Noida G.B Nagar(U.P) - 201301</p>
                                    <p><i class="fa fa-phone-alt"></i>+91 9643058418, 01204097776</p>
                                    <p>info@grpcareer.com</p>
                                    <div class="footer-social">
                                        <a href=""><i class="fab fa-twitter"></i></a>
                                        <a href=""><i class="fab fa-facebook-f"></i></a>
                                        <a href=""><i class="fab fa-youtube"></i></a>
                                        <a href=""><i class="fab fa-instagram"></i></a>
                                        <a href=""><i class="fab fa-linkedin-in"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="footer-link">
                                    <h2>Quick Links</h2>
                                    <a href="">Terms of use</a>
                                    <a href="">Privacy policy</a>
                                    <a href="">Cookies</a>
                                    <a href="">Help</a>
                                    <a href="">FQAs</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <div class="footer-newsletter">
                          <h2>Newsletter</h2>
                          <p>
                            Welcome to the latest edition of GRP Pvt Ltd, your go-to newsletter for job updates, career tips, and industry insights. Whether you're actively job hunting or just exploring new opportunities, we’re here to support you every step of the way. Stay tuned for curated job openings, expert advice, and success stories to keep you motivated and informed!
                          </p>
                      
                          <!-- Newsletter Form -->
                          <form id="newsletterForm">
                            <div class="form">
                              <input class="form-control" type="email" name="email" placeholder="Email goes here" required>
                              <button class="btn" type="submit">Submit</button>
                            </div>
                            <div id="newsletterMessage" style="margin-top: 10px; display: none;"></div>
                          </form>
                        </div>
                      </div>
                      
                      <!-- JS script -->
                       <script>
                      document.addEventListener("DOMContentLoaded", function() {
                        const newsletterForm = document.getElementById('newsletterForm');
                        const messageEl = document.getElementById('newsletterMessage');
                        
                        if (newsletterForm) {
                          newsletterForm.addEventListener('submit', function(e) {
                            e.preventDefault();
                            
                            const email = this.querySelector('input[name="email"]').value.trim();
                            
                            // Show loading state
                            const submitBtn = this.querySelector('button[type="submit"]');
                            const originalBtnText = submitBtn.textContent;
                            submitBtn.textContent = 'Submitting...';
                            submitBtn.disabled = true;
                            
                            // Clear previous messages
                            messageEl.style.display = 'none';
                            
                            if (!email) {
                              showMessage('Please enter your email address', 'error');
                              resetButton();
                              return;
                            }
                            
                            if (!validateEmail(email)) {
                              showMessage('Please enter a valid email address', 'error');
                              resetButton();
                              return;
                            }
                            
                            // Send the request
                            fetch('/subscribe-newsletter', {
                              method: 'POST',
                              headers: {
                                'Content-Type': 'application/json',
                              },
                              body: JSON.stringify({ email: email })
                            })
                            .then(response => {
                              if (!response.ok) {
                                throw new Error('Server error: ' + response.status);
                              }
                              return response.json();
                            })
                            .then(data => {
                              if (data.success) {
                                showMessage(data.message || 'Thank you for subscribing!', 'success');
                                newsletterForm.reset();
                              } else {
                                showMessage(data.error || 'Subscription failed. Please try again.', 'error');
                              }
                            })
                            .catch(error => {
                              console.error('Error:', error);
                              showMessage('Network error. Please try again later.', 'error');
                            })
                            .finally(() => {
                              resetButton();
                            });
                            
                            function resetButton() {
                              submitBtn.textContent = originalBtnText;
                              submitBtn.disabled = false;
                            }
                            
                            function showMessage(message, type) {
                              messageEl.textContent = message;
                              messageEl.style.display = 'block';
                              messageEl.style.color = type === 'success' ? 'green' : 'red';
                              
                              // Scroll to message if it's not visible
                              if (!isElementInViewport(messageEl)) {
                                messageEl.scrollIntoView({ behavior: 'smooth' });
                              }
                              
                              // Hide message after delay
                              setTimeout(() => {
                                messageEl.style.display = 'none';
                              }, 5000);
                            }
                            
                            function validateEmail(email) {
                              const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                              return re.test(email);
                            }
                            
                            function isElementInViewport(el) {
                              const rect = el.getBoundingClientRect();
                              return (
                                rect.top >= 0 &&
                                rect.left >= 0 &&
                                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
                              );
                            }
                          });
                        }
                      });
                    </script>
                      
            </div>
            <div class="container copyright">
                <div class="row">
                    <div class="col-md-6">
                        <p>&copy; <a href="#">GRP Career Pvt Ltd.</a>, All Right Reserved.</p>
                    </div>
                    <div class="col-md-6">
                        <p>Designed By <a href="">GRP Career Pvt Ltd.</a></p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->

        <a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>

        <!-- JavaScript Libraries -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <script src="lib/easing/easing.min.js"></script>
        <script src="lib/owlcarousel/owl.carousel.min.js"></script>
        <script src="lib/waypoints/waypoints.min.js"></script>
        <script src="lib/counterup/counterup.min.js"></script>
        
        <!-- Contact Javascript File -->
      

        <!-- Template Javascript -->
        <script src="js/main.js"></script>
        <script src="js/session.js"></script>
        <button id="chatbot-toggle" style="position: fixed; bottom: 30px; right: 30px; padding: 15px; background: linear-gradient(135deg, #5e72e4, #825ee4); border: none; border-radius: 50%; cursor: pointer; z-index: 999; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); transition: all 0.3s ease;">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
          </svg>
        </button>
                <!-- Chatbot Container -->
                <div id="chatbot-container" class="chatbot-popup">
                  <div id="chatbot-header">
                    <div class="header-content">
                      <div class="avatar">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <circle cx="12" cy="12" r="10"></circle>
                          <path d="M12 16v-4"></path>
                          <path d="M12 8h.01"></path>
                        </svg>
                      </div>
                      <div class="header-text">
                        <h4>GRP Career Assistant</h4>
                        <span class="status">Online</span>
                      </div>
                    </div>
                    <button id="chatbot-close">
                      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                    </button>
                  </div>
                  <div id="chatbot-messages"></div>
                  <div id="chatbot-input">
                    <input type="text" id="user-input" placeholder="Type your message...">
                    <button id="send-message">
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                      </svg>
                    </button>
                  </div>
                </div>
                
                <!-- Chatbot CSS -->
                <style>
                  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
                
                  .chatbot-popup {
                    position: fixed;
                    bottom: -500px;
                    right: 30px;
                    width: 350px;
                    background: #fff;
                    border-radius: 16px;
                    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
                    transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
                    z-index: 1000;
                    display: flex;
                    flex-direction: column;
                    max-height: 500px;
                    font-family: 'Inter', sans-serif;
                    overflow: hidden;
                  }
                
                  .chatbot-popup.active {
                    bottom: 30px;
                    transform: translateY(0) scale(1);
                    opacity: 1;
                  }
                
                  #chatbot-toggle {
                    transform: scale(1);
                    transition: transform 0.3s ease;
                  }
                
                  #chatbot-toggle:hover {
                    transform: scale(1.1);
                  }
                
                  #chatbot-header {
                    background: linear-gradient(135deg, #5e72e4, #825ee4);
                    padding: 16px;
                    border-radius: 16px 16px 0 0;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    color: white;
                  }
                
                  .header-content {
                    display: flex;
                    align-items: center;
                  }
                
                  .avatar {
                    width: 36px;
                    height: 36px;
                    background: rgba(255, 255, 255, 0.2);
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin-right: 12px;
                  }
                
                  .header-text {
                    display: flex;
                    flex-direction: column;
                  }
                
                  #chatbot-header h4 {
                    margin: 0;
                    font-size: 16px;
                    font-weight: 600;
                    color: white;
                  }
                
                  .status {
                    font-size: 12px;
                    opacity: 0.8;
                  }
                
                  #chatbot-close {
                    background: rgba(255, 255, 255, 0.1);
                    border: none;
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    transition: background 0.3s;
                    padding: 0;
                  }
                
                  #chatbot-close:hover {
                    background: rgba(255, 255, 255, 0.2);
                  }
                
                  #chatbot-messages {
                    height: 350px;
                    overflow-y: auto;
                    padding: 20px;
                    background: #f9fafc;
                    flex-grow: 1;
                    scroll-behavior: smooth;
                  }
                
                  #chatbot-messages::-webkit-scrollbar {
                    width: 6px;
                  }
                
                  #chatbot-messages::-webkit-scrollbar-thumb {
                    background: #d1d5db;
                    border-radius: 10px;
                  }
                
                  .message {
                    margin: 8px 0;
                    padding: 12px 16px;
                    border-radius: 18px;
                    max-width: 80%;
                    word-wrap: break-word;
                    line-height: 1.5;
                    font-size: 14px;
                    position: relative;
                    animation: fadeIn 0.3s ease-out;
                  }
                
                  @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                  }
                
                  .user-message {
                    background: linear-gradient(135deg, #5e72e4, #825ee4);
                    color: white;
                    margin-left: auto;
                    border-bottom-right-radius: 4px;
                    box-shadow: 0 2px 5px rgba(94, 114, 228, 0.3);
                  }
                
                  .bot-message {
                    background: #e9ecef;
                    color: #495057;
                    margin-right: auto;
                    border-bottom-left-radius: 4px;
                    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
                  }
                
                  #chatbot-input {
                    display: flex;
                    padding: 16px;
                    background: #fff;
                    border-top: 1px solid #f1f3f5;
                    border-radius: 0 0 16px 16px;
                  }
                
                  #user-input {
                    flex: 1;
                    padding: 12px 16px;
                    border: 1px solid #e9ecef;
                    border-radius: 24px;
                    font-size: 14px;
                    font-family: 'Inter', sans-serif;
                    transition: all 0.3s;
                    margin-right: 10px;
                    outline: none;
                  }
                
                  #user-input:focus {
                    border-color: #5e72e4;
                    box-shadow: 0 0 0 3px rgba(94, 114, 228, 0.1);
                  }
                
                  #send-message {
                    width: 40px;
                    height: 40px;
                    background: linear-gradient(135deg, #5e72e4, #825ee4);
                    color: white;
                    border: none;
                    border-radius: 50%;
                    cursor: pointer;
                    transition: all 0.3s;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 0;
                    box-shadow: 0 2px 5px rgba(94, 114, 228, 0.3);
                  }
                
                  #send-message:hover {
                    transform: scale(1.05);
                    box-shadow: 0 4px 10px rgba(94, 114, 228, 0.4);
                  }
                
                  .typing-indicator {
                    display: inline-block;
                    padding: 12px 16px;
                    background: #e9ecef;
                    border-radius: 18px;
                    border-bottom-left-radius: 4px;
                    margin-right: auto;
                    animation: fadeIn 0.5s;
                  }
                
                  .typing-indicator span {
                    display: inline-block;
                    width: 8px;
                    height: 8px;
                    background: #adb5bd;
                    border-radius: 50%;
                    margin: 0 2px;
                    animation: bounce 1.4s infinite ease-in-out;
                  }
                
                  .typing-indicator span:nth-child(2) {
                    animation-delay: 0.2s;
                  }
                
                  .typing-indicator span:nth-child(3) {
                    animation-delay: 0.4s;
                  }
                
                  @keyframes bounce {
                    0%, 60%, 100% { transform: translateY(0); }
                    30% { transform: translateY(-5px); }
                  }
                
                  /* Animation for messages */
                  @keyframes slideIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                  }
                
                  .message {
                    animation: slideIn 0.3s ease forwards;
                  }
                
                  /* Quick reply buttons */
                  .quick-replies {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 8px;
                    margin-top: 10px;
                  }
                
                  .quick-reply {
                    background: #f1f3f5;
                    border: none;
                    border-radius: 20px;
                    padding: 6px 12px;
                    font-size: 12px;
                    cursor: pointer;
                    transition: all 0.2s;
                  }
                
                  .quick-reply:hover {
                    background: #dee2e6;
                  }
                
                  /* Responsive adjustments */
                  @media (max-width: 480px) {
                    .chatbot-popup {
                      width: 90%;
                      right: 5%;
                      left: 5%;
                    }
                  }
                </style>
                
                <!-- Chatbot JavaScript -->
                <script>
                  document.addEventListener('DOMContentLoaded', function() {
                    // Enhanced chatbot data storage
                    const userData = {
                      name: "",
                      email: "",
                      phone: "",
                      currentRole: "",
                      careerGoal: "",
                      experienceLevel: "",
                      preferredLearning: "",
                      interests: [],
                      painPoints: [],
                      conversation: [],
                      lastActive: new Date().toISOString()
                    };
                
                    // Comprehensive bot responses with multiple conversation paths
                    const botResponses = {
                      greeting: [
                        "👋 Hello! I'm GRP Career Assistant. I'd love to help you with your career journey. What's your name?", 
                        "Welcome to GRP Career Consultancy! 😊 To get started, may I know your name?"
                      ],
                      nameRequest: [
                        "Nice to meet you, {name}! Could you share your email address so we can send you personalized career resources?", 
                        "Thanks, {name}! What's a good email address to reach you with career opportunities?"
                      ],
                      emailRequest: [
                        "Great! For quick updates, could you also share your phone number? (We promise no spam!)", 
                        "Perfect! We sometimes share time-sensitive career opportunities. What's your phone number for quick alerts?"
                      ],
                      phoneRequest: [
                        "Thank you! To better assist you, could you tell me your current role or job title?", 
                        "Got it! What's your current professional role or position?"
                      ],
                      currentRoleRequest: [
                        "Thanks for sharing! What's your primary career goal right now? (e.g., promotion, career change, skill development)", 
                        "Understood! What are you hoping to achieve in your career in the next 6-12 months?"
                      ],
                      careerGoalRequest: [
                        "Interesting! How many years of professional experience do you have in your field?", 
                        "Got it! Would you describe yourself as entry-level, mid-career, or senior professional?"
                      ],
                      experienceRequest: [
                        "Almost done! Do you prefer learning through online courses, in-person workshops, or coaching sessions?", 
                        "Final question! What's your preferred way to develop new skills? (e.g., self-paced online, live training, 1-on-1 coaching)"
                      ],
                      learningPreferenceRequest: [
                        "🎉 Thank you for sharing! Based on your inputs, I'd recommend exploring our {recommendation}. Would you like me to send more details to your email?", 
                        "✅ Great! Our {recommendation} program would be perfect for you. Should I have a career advisor contact you?"
                      ],
                      serviceOptions: [
                        "Here are services that might help you:\n\n" +
                        "💼 <strong>Resume Masterclass</strong> - Transform your resume in 7 days\n" +
                        "🎤 <strong>Interview Bootcamp</strong> - Ace any interview with confidence\n" +
                        "🗺️ <strong>Career Roadmap</strong> - Personalized 5-year career plan\n\n" +
                        "Which one interests you most?",
                        
                        "Based on your goals, consider these options:\n\n" +
                        "📈 <strong>Career Acceleration</strong> - Fast-track promotions\n" +
                        "🔄 <strong>Career Transition</strong> - Switch industries smoothly\n" +
                        "🌟 <strong>Executive Presence</strong> - Leadership development\n\n" +
                        "Want to explore any of these?"
                      ],
                      specificServiceInfo: {
                        "resume": "Our <strong>Resume Masterclass</strong> helps you craft an ATS-friendly resume that gets interviews. It includes:\n- Custom templates\n- Keyword optimization\n- Achievement-focused writing\n- 5 resume reviews\n\nInterested in joining?",
                        "interview": "The <strong>Interview Bootcamp</strong> prepares you for any interview format:\n- Mock interviews with feedback\n- STAR method training\n- Salary negotiation tactics\n- 30+ common questions mastered\n\nWant to practice with us?",
                        "career": "Our <strong>Career Roadmap</strong> gives you:\n- Personalized 5-year plan\n- Skills gap analysis\n- Industry trends report\n- Mentor matching\n\nReady to map your future?"
                      },
                      pricingInfo: [
                        "Our programs range from $99 for single workshops to $999 for comprehensive packages. Financial aid is available for qualified candidates.",
                        "We offer flexible pricing:\n- $99-$299 for individual courses\n- $499-$999 for certification programs\n- Custom corporate rates available\n\nWhat budget range works for you?"
                      ],
                      contactInfo: [
                        "You can reach our team at:\n📧 info@grpcareers.com\n📞 +91 9643058418, 01204097776\n🏢 Corp. Off: 2nd Floor ,A-55, Sec-02,Noida G.B Nagar(U.P) - 201301, ",
                        "Contact options:\n- Email: info@grpcareers.com\n- +91 9643058418, 01204097776 (Mon-Sat 9am-6pm EST)\n- Call Us :>"
                      ],
                      farewell: [
                        "Thank you! Our career advisor will contact you within 24 hours. Check your email for resources in the meantime! 🚀", 
                        "All set! We'll be in touch soon with personalized recommendations. Wishing you career success! 🌟"
                      ],
                      default: [
                        "How can I assist with your career development today?", 
                        "What aspect of your career would you like to improve?",
                        "Is there a specific career challenge you're facing?"
                      ],
                      error: [
                        "I didn't quite catch that. Could you rephrase?", 
                        "Hmm, I'm not sure I understand. Could you explain differently?"
                      ]
                    };
                
                    // Service recommendations based on user inputs
                    const serviceRecommendations = {
                      "entry-level": "Career Launchpad Program",
                      "mid-career": "Career Accelerator",
                      "senior": "Executive Leadership Program",
                      "promotion": "Advancement Track",
                      "career change": "Transition Masterclass",
                      "skill development": "Skill Builder Intensive"
                    };
                
                    // DOM elements
                    const chatbotContainer = document.getElementById('chatbot-container');
                    const chatbotMessages = document.getElementById('chatbot-messages');
                    const userInput = document.getElementById('user-input');
                    const sendButton = document.getElementById('send-message');
                    const toggleButton = document.getElementById('chatbot-toggle');
                    const closeButton = document.getElementById('chatbot-close');
                    
                    let conversationStage = 0; // Tracks where we are in the conversation flow
                    let isWaitingForResponse = false;
                    let currentQuickReplies = [];
                
                    // Toggle chatbot visibility
                    toggleButton.addEventListener('click', () => {
                      chatbotContainer.classList.toggle('active');
                      if (chatbotContainer.classList.contains('active') && conversationStage === 0) {
                        setTimeout(() => {
                          addMessage('bot', getRandomResponse(botResponses.greeting));
                        }, 600);
                      }
                    });
                
                    closeButton.addEventListener('click', () => {
                      chatbotContainer.classList.remove('active');
                    });
                
                    // Input sanitization
                    function sanitizeInput(input) {
                      const div = document.createElement('div');
                      div.textContent = input;
                      return div.innerHTML;
                    }
                
                    // Validation functions
                    function validateEmail(email) {
                      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
                    }
                
                    function validatePhone(phone) {
                      return /^[\d\s\-()+]{10,}$/.test(phone);
                    }
                
                    // Add message to chat
                    function addMessage(sender, text, isQuickReply = false) {
                      if (isWaitingForResponse && !isQuickReply) return;
                      
                      const messageDiv = document.createElement('div');
                      messageDiv.classList.add('message', `${sender}-message`);
                      
                      if (typeof text === 'string') {
                        messageDiv.innerHTML = text.replace(/{name}/g, userData.name);
                      } else {
                        // Handle DOM elements (for quick replies)
                        messageDiv.appendChild(text);
                      }
                      
                      chatbotMessages.appendChild(messageDiv);
                      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                      
                      // Add timestamp for user messages
                      if (sender === 'user') {
                        const timestamp = document.createElement('div');
                        timestamp.classList.add('timestamp');
                        timestamp.style.fontSize = '10px';
                        timestamp.style.opacity = '0.6';
                        timestamp.style.textAlign = 'right';
                        timestamp.style.marginTop = '4px';
                        timestamp.style.marginRight = '4px';
                        
                        const now = new Date();
                        timestamp.textContent = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                        messageDiv.appendChild(timestamp);
                      }
                    }
                
                    // Show typing indicator
                    function showTypingIndicator() {
                      if (isWaitingForResponse) return;
                      
                      isWaitingForResponse = true;
                      const typingDiv = document.createElement('div');
                      typingDiv.classList.add('typing-indicator');
                      typingDiv.id = 'typing-indicator';
                      typingDiv.innerHTML = '<span></span><span></span><span></span>';
                      chatbotMessages.appendChild(typingDiv);
                      chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                    }
                
                    // Hide typing indicator
                    function hideTypingIndicator() {
                      const typingDiv = document.getElementById('typing-indicator');
                      if (typingDiv) {
                        typingDiv.remove();
                      }
                      isWaitingForResponse = false;
                    }
                
                    // Get random response
                    function getRandomResponse(array) {
                      return array[Math.floor(Math.random() * array.length)];
                    }
                
                    // Add quick reply buttons
                    function addQuickReplies(replies) {
                      currentQuickReplies = replies;
                      const container = document.createElement('div');
                      container.classList.add('quick-replies');
                      
                      replies.forEach(reply => {
                        const button = document.createElement('button');
                        button.classList.add('quick-reply');
                        button.textContent = reply;
                        button.addEventListener('click', () => {
                          // Remove all quick replies
                          document.querySelectorAll('.quick-replies').forEach(el => el.remove());
                          addMessage('user', reply);
                          processMessage(reply);
                        });
                        container.appendChild(button);
                      });
                      
                      addMessage('bot', container, true);
                    }
                
                    // Process user messages with conversation flow
                    function processMessage(message) {
                      showTypingIndicator();
                      
                      setTimeout(() => {
                        hideTypingIndicator();
                        let response;
                        let quickReplies = [];
                        
                        switch(conversationStage) {
                          case 0: // Name collection
                            userData.name = message;
                            userData.conversation.push({sender: 'user', message: message});
                            response = getRandomResponse(botResponses.nameRequest).replace(/{name}/g, userData.name);
                            conversationStage = 1;
                            break;
                            
                          case 1: // Email collection
                            if (validateEmail(message)) {
                              userData.email = message;
                              userData.conversation.push({sender: 'user', message: message});
                              response = getRandomResponse(botResponses.emailRequest);
                              conversationStage = 2;
                            } else {
                              response = "🔍 That email doesn't look quite right. Please enter a valid email (e.g., example@domain.com)";
                            }
                            break;
                            
                          case 2: // Phone collection
                            if (validatePhone(message)) {
                              userData.phone = message;
                              userData.conversation.push({sender: 'user', message: message});
                              response = getRandomResponse(botResponses.phoneRequest);
                              conversationStage = 3;
                            } else {
                              response = "📱 Please enter a valid phone number (at least 10 digits)";
                            }
                            break;
                            
                          case 3: // Current role
                            userData.currentRole = message;
                            userData.conversation.push({sender: 'user', message: message});
                            response = getRandomResponse(botResponses.currentRoleRequest);
                            quickReplies = ["Promotion", "Career change", "Skill development"];
                            conversationStage = 4;
                            break;
                            
                          case 4: // Career goal
                            userData.careerGoal = message.toLowerCase();
                            userData.conversation.push({sender: 'user', message: message});
                            response = getRandomResponse(botResponses.careerGoalRequest);
                            quickReplies = ["Entry-level", "Mid-career", "Senior"];
                            conversationStage = 5;
                            break;
                            
                          case 5: // Experience level
                            userData.experienceLevel = message.toLowerCase();
                            userData.conversation.push({sender: 'user', message: message});
                            response = getRandomResponse(botResponses.experienceRequest);
                            quickReplies = ["Online courses", "In-person workshops", "Coaching"];
                            conversationStage = 6;
                            break;
                            
                          case 6: // Learning preference
                            userData.preferredLearning = message.toLowerCase();
                            userData.conversation.push({sender: 'user', message: message});
                            
                            // Generate personalized recommendation
                            let recommendation = serviceRecommendations[userData.experienceLevel] || 
                                               serviceRecommendations[userData.careerGoal] || 
                                               "Career Success Program";
                            
                            response = getRandomResponse(botResponses.learningPreferenceRequest)
                              .replace(/{recommendation}/g, recommendation)
                              .replace(/{recommendation}/g, recommendation);
                            
                            quickReplies = ["Yes, please!", "More info first"];
                            conversationStage = 7;
                            break;
                            
                          case 7: // Free conversation
                            userData.conversation.push({sender: 'user', message: message});
                            const msg = message.toLowerCase();
                            
                            if (msg.includes('resume') || msg.includes('cv')) {
                              response = botResponses.specificServiceInfo["resume"];
                              userData.interests.push("resume services");
                              quickReplies = ["Join Masterclass", "See pricing", "Contact advisor"];
                            } 
                            else if (msg.includes('interview') || msg.includes('prepare')) {
                              response = botResponses.specificServiceInfo["interview"];
                              userData.interests.push("interview preparation");
                              quickReplies = ["Start Bootcamp", "Pricing info", "Talk to expert"];
                            }
                            else if (msg.includes('career') || msg.includes('plan')) {
                              response = botResponses.specificServiceInfo["career"];
                              userData.interests.push("career planning");
                              quickReplies = ["Get Roadmap", "Cost?", "Schedule call"];
                            }
                            else if (msg.includes('price') || msg.includes('cost')) {
                              response = getRandomResponse(botResponses.pricingInfo);
                              quickReplies = ["Workshops", "Programs", "Contact us"];
                            }
                            else if (msg.includes('contact') || msg.includes('reach')) {
                              response = getRandomResponse(botResponses.contactInfo);
                              quickReplies = ["Services", "Pricing", "Website"];
                            }
                            else if (msg.includes('service') || msg.includes('offer')) {
                              response = getRandomResponse(botResponses.serviceOptions);
                              quickReplies = ["Resume", "Interview", "Career Plan"];
                            }
                            else if (msg.includes('start over') || msg.includes('reset')) {
                              response = '🔄 Okay, let\'s start fresh. What\'s your name?';
                              conversationStage = 0;
                              // Reset user data except for conversation history
                              userData.name = "";
                              userData.email = "";
                              userData.phone = "";
                              userData.currentRole = "";
                              userData.careerGoal = "";
                              userData.experienceLevel = "";
                              userData.preferredLearning = "";
                            }
                            else if (msg.includes('thank') || msg.includes('bye')) {
                              response = "You're welcome! 😊 Is there anything else I can help with before you go?";
                              quickReplies = ["Yes, one more thing", "No, that's all"];
                            }
                            else {
                              response = getRandomResponse(botResponses.default);
                              quickReplies = ["Services", "Pricing", "Contact"];
                            }
                            break;
                            
                          default:
                            response = getRandomResponse(botResponses.error);
                        }
                        
                        addMessage('bot', response);
                        userData.conversation.push({sender: 'bot', message: response});
                        
                        // Add quick replies if any
                        if (quickReplies.length > 0) {
                          setTimeout(() => {
                            addQuickReplies(quickReplies);
                          }, 500);
                        }
                        
                        // Save data when conversation reaches certain points
                        if (conversationStage === 7 || message.toLowerCase().includes('bye')) {
                          saveConversation();
                        }
                      }, 1000 + Math.random() * 1500);
                    }
                
                    // Save conversation to database
                   // Update the saveConversation function in the frontend JavaScript to send data to the backend
        
        function saveConversation() {
        const conversationData = {
          name: userData.name,
          email: userData.email,
          phone: userData.phone,
          currentRole: userData.currentRole,
          careerGoal: userData.careerGoal,
          experienceLevel: userData.experienceLevel,
          preferredLearning: userData.preferredLearning,
          interests: userData.interests.join(', '),
          painPoints: userData.painPoints.join(', '),
          conversation: JSON.stringify(userData.conversation),
          lastActive: new Date().toISOString()
        };
        
        // Show saving indicator
        const savingDiv = document.createElement('div');
        savingDiv.classList.add('message', 'bot-message');
        savingDiv.innerHTML = "💾 Saving your information...";
        chatbotMessages.appendChild(savingDiv);
        chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        
        // Send data to backend
        fetch('/save-chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            name: userData.name,
            email: userData.email,
            phone: userData.phone,
            interests: userData.interests.join(', '),
            conversation: userData.conversation
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            savingDiv.innerHTML = "✅ Your information has been saved successfully!";
            console.log('Chat saved with ID:', data.chatId);
          } else {
            savingDiv.innerHTML = "❌ There was an error saving your information. Please try again.";
            console.error('Error:', data.error);
          }
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        })
        .catch(error => {
          console.error('Error saving conversation:', error);
          savingDiv.innerHTML = "❌ There was an error saving your information. Please try again.";
          chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        });
        }
                
                    // Send message function
                    function sendMessage() {
                      const message = sanitizeInput(userInput.value.trim());
                      if (!message) {
                        userInput.focus();
                        return;
                      }
                
                      addMessage('user', message);
                      processMessage(message);
                      userInput.value = '';
                      userInput.focus();
                    }
                
                    // Event listeners
                    sendButton.addEventListener('click', sendMessage);
                    userInput.addEventListener('keypress', (e) => {
                      if (e.key === 'Enter') sendMessage();
                    });
                
                    // Add pulse animation to chat button when inactive
                    let inactivityTimer;
                    function startInactivityTimer() {
                      clearTimeout(inactivityTimer);
                      inactivityTimer = setTimeout(() => {
                        if (!chatbotContainer.classList.contains('active')) {
                          toggleButton.classList.add('pulse');
                        }
                      }, 30000);
                    }
                
                    // Add pulse animation CSS
                    const style = document.createElement('style');
                    style.textContent = `
                      @keyframes pulse {
                        0% { box-shadow: 0 0 0 0 rgba(94, 114, 228, 0.4); }
                        70% { box-shadow: 0 0 0 10px rgba(94, 114, 228, 0); }
                        100% { box-shadow: 0 0 0 0 rgba(94, 114, 228, 0); }
                      }
                      #chatbot-toggle.pulse {
                        animation: pulse 2s infinite;
                      }
                    `;
                    document.head.appendChild(style);
                
                    // Initialize with greeting when opened
                    document.addEventListener('mousemove', startInactivityTimer);
                    document.addEventListener('click', startInactivityTimer);
                    startInactivityTimer();
                
                    toggleButton.addEventListener('click', () => {
                      toggleButton.classList.remove('pulse');
                    });
                  });
                </script>
    </body>
</html>
